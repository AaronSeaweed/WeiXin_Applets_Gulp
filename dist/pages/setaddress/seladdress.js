"use strict";Page({data:{addressList:[],positioncity:""},onLoad:function(t){this.setData({positioncity:t.city})},onShow:function(){wx.getLocation({success:function(t){}})},searchaddress:function(t){var a=t.detail.value;if(a){var s=this.data.positioncity,e=this;wx.request({url:"https://apis.map.qq.com/ws/place/v1/suggestion/?region="+s+"&keyword="+a+"&key=DDNBZ-NOVHR-UY7WA-WN62D-BGLV2-MDFRP",method:"GET",data:{},success:function(t){200==t.statusCode&&"request:ok"==t.errMsg?e.setData({addressList:t.data.data}):(e.setData({addressList:[]}),wx.showToast({title:"获取地址失败",icon:"none",duration:2e3}))}})}else this.setData({addressList:[]})},selectaddress:function(t){var a=getCurrentPages();a[a.length-2].setData({dateiladdress:t.currentTarget.dataset.address,area:t.currentTarget.dataset.area}),wx.navigateBack({delta:1})}});